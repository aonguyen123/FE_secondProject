(window["webpackJsonpreact-antd"]=window["webpackJsonpreact-antd"]||[]).push([[21],{1289:function(e,n,r){"use strict";r.r(n);var t=r(232),a=r(0),c=r.n(a),i=r(38),s=r(871),d=r(872),o=r(5),l=r(236);function u(){var e=Object(a.useState)(""),n=Object(t.a)(e,2),r=n[0],u=n[1],f=Object(i.c)((function(e){return e.uiReducer.loadingData})),m=Object(i.c)((function(e){return e.userReducer.searchUsers})),h=Object(i.c)((function(e){return e.userReducer.isSearchUser})),E=Object(i.c)((function(e){return e.userReducer.userInfo})),b=Object(i.c)((function(e){return e.uiReducer.visible})),U=Object(a.useContext)(l.a).socketRef,v=Object(i.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{searchUser:function(e){v(o.a.userActions.searchUser(e,E._id))},showCardUser:function(e){u(e),v(o.a.uiActions.changeVisible(!0))},loadingData:f,searchUsers:m,friends:E.friends,isSearchUser:h,searchEmpty:function(){v(o.a.userActions.searchUserEmpty())},cancelFriend:function(e){U.current.emit("cancelFriend",{idFriend:e,idUser:E._id},(function(e){v(o.a.eventsActions.unFriend(e))}))}}),b&&c.a.createElement(d.a,{visible:b,onCancelFlowUser:function(){v(o.a.uiActions.changeVisible(!1))},idFriend:r,userCurrent:E,socketRef:U}))}r.d(n,"default",(function(){return u}))},871:function(e,n,r){"use strict";var t=r(0),a=r.n(t),c=r(797),i=r(13),s=r(912).a.Search;function d(e){var n=e.searchUser,r=e.loadingData,t=e.searchEmpty;return a.a.createElement(s,{placeholder:Object(i.formatMessage)({id:"home.friends.searchPlacehoder"}),loading:r,onSearch:function(e,r){e&&n(e)},onChange:function(e){e.target.value||t()}})}var o=r(1292),l=r(34),u=r(791),f=r(231),m=r(789);function h(e,n,r,t){return a.a.createElement(m.a,null,a.a.createElement(m.a.Item,{onClick:function(){return e(n)}},Object(i.formatMessage)({id:"home.friends.viewDetail"})),-1!==r.findIndex((function(e){return e.idUser._id===n}))&&a.a.createElement(m.a.Item,{onClick:function(){return t(n)}},Object(i.formatMessage)({id:"home.friends.cancelFriend"})))}var E=o.b.Item;function b(e){var n=e.friend,r=e.showCardUser,t=e.friends,c=e.cancelFriend;return a.a.createElement(E,{key:n._id,extra:a.a.createElement(f.c,{key:"more",menu:h(r,n._id,t,c)})},a.a.createElement(E.Meta,{avatar:a.a.createElement(u.a,{src:n.photoURL}),title:a.a.createElement(l.a,{to:"/profile/".concat(n._id)},n.displayName),description:-1!==t.findIndex((function(e){return e.idUser._id===n._id}))&&Object(i.formatMessage)({id:"home.friends.follow"})}))}r(898);function U(e){var n=e.searchUsers,r=e.showCardUser,t=e.friends,c=e.cancelFriend,i=e.isSearchUser;return a.a.createElement("div",{className:"list-friend-container"},a.a.createElement(o.b,{dataSource:i?n:t,renderItem:function(e){return a.a.createElement(b,{friend:i?e:e.idUser,showCardUser:r,friends:t,cancelFriend:c})}}))}function v(e){var n=e.searchUser,r=e.loadingData,t=e.searchUsers,s=e.isSearchUser,o=e.searchEmpty,l=e.showCardUser,u=e.friends,f=e.cancelFriend;return a.a.createElement(c.a,{title:Object(i.formatMessage)({id:"home.friends.title"}),size:"small"},a.a.createElement(d,{searchUser:n,loadingData:r,searchEmpty:o}),a.a.createElement(U,{searchUsers:t,isSearchUser:s,showCardUser:l,friends:u,cancelFriend:f}))}r.d(n,"a",(function(){return v}))},872:function(e,n,r){"use strict";var t=r(0),a=r.n(t),c=r(34),i=r(797),s=r(798),d=r(796),o=r(72),l=r(1147),u=r(799),f=r(13),m=r(38),h=r(1267),E=r(813),b=r(1266),U=r(988),v=r(987),O=r(251),p=(r(388),r(231)),w=r(5),F=(r(899),i.a.Meta);function g(e){var n=e.visible,r=e.onCancelFlowUser,g=e.idFriend,j=e.userCurrent,y=e.socketRef,C=Object(m.b)(),k=Object(m.c)((function(e){return e.userReducer.userById})),A=Object(m.c)((function(e){return e.userReducer.statusAddFriend}));Object(t.useEffect)((function(){return C(w.a.userActions.fetchUserById(g,j._id)),function(){C(w.a.userActions.cleanUserById())}}),[C,g,j._id]),Object(t.useEffect)((function(){var e=y.current;return e.on("sendAddFriendSuccess",(function(e){C(w.a.userActions.sendAddFriendSuccess(e))})),function(){e.off("sendAddFriendSuccess")}}),[y,C]);return a.a.createElement(d.a,{visible:n,onCancel:r,footer:null,width:350,centered:!1},0===Object.keys(k).length?a.a.createElement(p.d,null):a.a.createElement(i.a,{bordered:!1,cover:a.a.createElement("div",null,a.a.createElement(O.LazyLoadImage,{alt:"",height:200,width:"100%",src:k.photoURL,effect:"blur"})),actions:[a.a.createElement(o.a,{title:Object(f.formatMessage)({id:"home.modalViewUser.viewProfile"})},a.a.createElement(c.a,{to:"/profile/".concat(g)},a.a.createElement(h.a,{key:"view-profile"}))),a.a.createElement(o.a,{title:-1!==j.friends.findIndex((function(e){return e.idUser._id===g}))?Object(f.formatMessage)({id:"home.modalViewUser.follow"}):Object(f.formatMessage)({id:"home.modalViewUser.addFriend"})},-1!==j.friends.findIndex((function(e){return e.idUser._id===g}))?a.a.createElement(E.a,{style:{color:"#1890FF"}}):a.a.createElement(b.a,{style:{color:A&&"#1890FF"},key:"add-user",onClick:function(){A||y.current.emit("sendAddFriend",{idSender:j._id,idReceiver:g},(function(e){s.a.error(e,4)}))}}))]},a.a.createElement(F,{title:a.a.createElement("p",null,k.displayName),description:a.a.createElement("div",null,a.a.createElement(l.a,{direction:"vertical"},""!==k.district&&""!==k.provinceOrCity&&a.a.createElement(u.a,null,a.a.createElement(U.a,null)," ","".concat(k.district.label," - ").concat(k.provinceOrCity.label)),""!==k.phonenumber&&a.a.createElement(u.a,null,a.a.createElement(v.a,null)," ","+84".concat(k.phonenumber)),a.a.createElement(u.a,null,a.a.createElement(E.a,null)," ","".concat(k.friends.length," ").concat(Object(f.formatMessage)({id:"home.modalViewUser.friends"})))))})))}r.d(n,"a",(function(){return g}))},898:function(e,n,r){},899:function(e,n,r){}}]);