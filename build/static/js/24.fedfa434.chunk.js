(window["webpackJsonpreact-antd"]=window["webpackJsonpreact-antd"]||[]).push([[24],{1168:function(e,t,n){},1169:function(e,t,n){},1296:function(e,t,n){"use strict";n.r(t);var a=n(233),c=n(0),r=n.n(c),i=n(13),u=n(38),s=n(841),o=n(797),l=n(116),f=n(61),d=n(24),m=n(999),b=n(1277),g=n(56),v=n(15),E=n(232),h=n(122);n(1168);function j(e){var t=e.photo,n=e.updatePhotoURL,u=Object(c.useState)(!1),s=Object(a.a)(u,2),o=s[0],j=s[1],p=Object(c.useState)([]),O=Object(a.a)(p,2),w=O[0],R=O[1],y=Object(c.useRef)(null),P=Object(c.useRef)(!1);Object(c.useEffect)((function(){return function(){null!==y.current&&(P.current=!0,y.current.cancel())}}),[]);var S={beforeUpload:function(e){if(!v.a.uploadCommon.beforeUpload(e))return!1}},z=function(e){j(!1),n(e)};return r.a.createElement("div",null,r.a.createElement(l.a,{type:"flex",justify:"center"},r.a.createElement(f.a,null,r.a.createElement("div",{className:"avatar_title"},Object(i.formatMessage)({id:"setting.basicSetting.avatar"})),r.a.createElement("div",{className:"avatar-setting"},r.a.createElement("img",{src:t,alt:"avatar"})),r.a.createElement(b.a,Object.assign({},S,{customRequest:function(e){j(!0);var t=e.onSuccess,n=e.onError,a=e.file,c=e.onProgress;y.current=h.a.firebase.storage.ref("/images/".concat(a.name)).put(a),E.p.customRequest(t,n,a,c,y.current,z)},disabled:o,fileList:w,onChange:function(e){var t=e.fileList;t.length>1&&t.splice(0,1),P.current||R(Object(d.a)(t))},showUploadList:{showRemoveIcon:!1}}),r.a.createElement("div",{className:"button_view-setting"},r.a.createElement(g.a,null,r.a.createElement(m.a,null),Object(i.formatMessage)({id:"setting.basicSetting.changeAvatar"})))))))}var p=n(5),O=Object(c.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(25)]).then(n.bind(null,1300))}));function w(e){var t=e.userInfo,n=Object(u.c)((function(e){return e.uiReducer.loadingButton})),a=Object(u.b)();return r.a.createElement(l.a,{gutter:[16,16]},r.a.createElement(f.a,{xl:6,lg:6,md:6,sm:24,xs:24},r.a.createElement(j,{photo:t.photoURL,updatePhotoURL:function(e){a(p.a.userActions.updatePhotoURL(e.url,t._id))}})),r.a.createElement(f.a,{xl:18,lg:18,md:18,sm:24,xs:24},r.a.createElement(c.Suspense,{fallback:r.a.createElement(E.h,{size:"small"})},r.a.createElement(O,{userInfo:t,updateProfile:function(e){a(p.a.userActions.updateProfile(e,t._id))},loadingButton:n}))))}var R=Object(c.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(32)]).then(n.bind(null,1298))}));function y(){var e=Object(u.c)((function(e){return e.userReducer.userInfo})),t=Object(u.c)((function(e){return e.uiReducer.loadingButton})),n=Object(u.c)((function(e){return e.uiReducer.loadingData})),a=Object(u.c)((function(e){return e.uiReducer.visible})),i=Object(u.c)((function(e){return e.userReducer.setting})),s=Object(u.b)();return r.a.createElement(l.a,null,r.a.createElement(f.a,{xl:24,lg:24,md:24,sm:24,xs:24},r.a.createElement(c.Suspense,{fallback:r.a.createElement(E.h,{size:"small"})},r.a.createElement(R,{updatePass:function(t){s(p.a.userActions.updatePassword(t.new_password,t.current_password,e._id))},loadingButton:t,visible:a,showModal:function(){s(p.a.uiActions.changeVisible(!0))},closeModal:function(){s(p.a.uiActions.changeVisible(!1))},setting:i,loadingData:n,onClickSwitch:function(t){s(p.a.userActions.settingPhone(e._id,t))}}))))}n(1169);var P=o.a.Item,S={base:Object(i.formatMessage)({id:"setting.basicSetting.title"}),security:Object(i.formatMessage)({id:"security.setting.title"})};function z(){var e=Object(c.useState)("base"),t=Object(a.a)(e,2),n=t[0],i=t[1],l=Object(c.useState)("horizontal"),f=Object(a.a)(l,2),d=f[0],m=f[1],b=Object(u.c)((function(e){return e.userReducer.userInfo})),g=void 0,v=function(){g&&requestAnimationFrame((function(){if(g){var e="horizontal";window.innerWidth<641&&(e="inline"),m(e)}}))};return Object(c.useEffect)((function(){return window.addEventListener("resize",v),v(),function(){window.removeEventListener("resize",v)}})),r.a.createElement(s.a,null,r.a.createElement("div",{className:"main",ref:function(e){return g=e}},r.a.createElement("div",{className:"leftMenu-account"},r.a.createElement(o.a,{mode:d,selectedKeys:[n],onClick:function(e){return function(e){i(e)}(e.key)}},Object.keys(S).map((function(e){return r.a.createElement(P,{key:e},S[e])})))),r.a.createElement("div",{className:"right-account"},r.a.createElement("div",{className:"title"},S[n]),function(){switch(n){case"base":return r.a.createElement(w,{userInfo:b});case"security":return r.a.createElement(y,null)}return null}())))}n.d(t,"default",(function(){return z}))},999:function(e,t,n){"use strict";var a=n(0),c=n.n(a),r={name:"upload",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]}},i=n(18),u=function(e,t){return c.a.createElement(i.a,Object.assign({},e,{ref:t,icon:r}))};u.displayName="UploadOutlined";t.a=c.a.forwardRef(u)}}]);