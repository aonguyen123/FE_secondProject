{"ast":null,"code":"function _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nimport pathToRegexp from 'path-to-regexp';\nexport var matchParamsPath = function matchParamsPath(pathname, breadcrumb, breadcrumbMap) {\n  // Internal logic use breadcrumbMap to ensure the order\n  // 内部逻辑使用 breadcrumbMap 来确保查询顺序\n  if (breadcrumbMap) {\n    var pathKey = _toConsumableArray(breadcrumbMap.keys()).find(function (key) {\n      return pathToRegexp(key).test(pathname);\n    });\n\n    if (pathKey) {\n      return breadcrumbMap.get(pathKey);\n    }\n  } // External uses use breadcrumb\n  // 外部用户使用 breadcrumb 参数\n\n\n  if (breadcrumb) {\n    var _pathKey = Object.keys(breadcrumb).find(function (key) {\n      return pathToRegexp(key).test(pathname);\n    });\n\n    if (_pathKey) {\n      return breadcrumb[_pathKey];\n    }\n  }\n\n  return {\n    path: ''\n  };\n};\n\nvar getPageTitle = function getPageTitle(props, ignoreTile) {\n  var _props$pathname = props.pathname,\n      pathname = _props$pathname === void 0 ? '/' : _props$pathname,\n      breadcrumb = props.breadcrumb,\n      breadcrumbMap = props.breadcrumbMap,\n      formatMessage = props.formatMessage,\n      _props$title = props.title,\n      title = _props$title === void 0 ? 'Ant Design Pro' : _props$title,\n      _props$menu = props.menu,\n      menu = _props$menu === void 0 ? {\n    locale: false\n  } : _props$menu;\n  var pageTitle = ignoreTile ? '' : title;\n\n  if (!pathname) {\n    return pageTitle;\n  }\n\n  var currRouterData = matchParamsPath(pathname, breadcrumb, breadcrumbMap);\n\n  if (!currRouterData) {\n    return pageTitle;\n  }\n\n  var pageName = currRouterData.name;\n\n  if (menu.locale !== false && currRouterData.locale && formatMessage) {\n    pageName = formatMessage({\n      id: currRouterData.locale || '',\n      defaultMessage: currRouterData.name\n    });\n  }\n\n  if (!pageName) {\n    return pageTitle;\n  }\n\n  if (ignoreTile) {\n    return pageName;\n  }\n\n  return \"\".concat(pageName, \" - \").concat(title);\n};\n/**\n * 获取关于 pageTile 的所有信息方便包装\n * @param props\n * @param ignoreTile\n */\n\n\nvar getPageTitleInfo = function getPageTitleInfo(props, ignoreTile) {\n  var _props$pathname2 = props.pathname,\n      pathname = _props$pathname2 === void 0 ? '/' : _props$pathname2,\n      breadcrumb = props.breadcrumb,\n      breadcrumbMap = props.breadcrumbMap,\n      formatMessage = props.formatMessage,\n      _props$title2 = props.title,\n      title = _props$title2 === void 0 ? 'Ant Design Pro' : _props$title2,\n      _props$menu2 = props.menu,\n      menu = _props$menu2 === void 0 ? {\n    locale: false\n  } : _props$menu2;\n  var pageTitle = ignoreTile ? '' : title;\n\n  if (!pathname) {\n    return {\n      title: pageTitle,\n      id: '',\n      pageName: pageTitle\n    };\n  }\n\n  var currRouterData = matchParamsPath(pathname, breadcrumb, breadcrumbMap);\n\n  if (!currRouterData) {\n    return {\n      title: pageTitle,\n      id: '',\n      pageName: pageTitle\n    };\n  }\n\n  var pageName = currRouterData.name;\n\n  if (menu.locale !== false && currRouterData.locale && formatMessage) {\n    pageName = formatMessage({\n      id: currRouterData.locale || '',\n      defaultMessage: currRouterData.name\n    });\n  }\n\n  if (!pageName) {\n    return {\n      title: pageTitle,\n      id: currRouterData.locale || '',\n      pageName: pageTitle\n    };\n  }\n\n  if (ignoreTile) {\n    return {\n      title: pageName,\n      id: currRouterData.locale || '',\n      pageName: pageName\n    };\n  }\n\n  return {\n    title: \"\".concat(pageName, \" - \").concat(title),\n    id: currRouterData.locale || '',\n    pageName: pageName\n  };\n};\n\nexport { getPageTitleInfo };\nexport default getPageTitle;","map":null,"metadata":{},"sourceType":"module"}